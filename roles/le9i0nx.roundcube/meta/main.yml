---

dependencies:

  - role: debops.secret

  - role: debops.rsyslog
    rsyslog_pools: [ '{{ rsyslog_pool_roundcube }}' ]
    rsyslog_pool_roundcube:
        enabled: True
        name: '02-roundcube'
        options: |
            $template DynFileRoundcube,"/var/log/%HOSTNAME%/%programname%/%$YEAR%.%$MONTH%.%$DAY%.log"
            if $programname == "roundcube" then ?DynFileRoundcube
            & stop

#  - role: le9i0nx.mailweb
  - role: debops.php5
    php5_packages: [ 'php5-mysql','php5','php-auth','php-mail-mime','php-net-smtp','php5-intl' ]

#    php5_pools: [ '{{ roundcube_php5_pool }}' ]
#    when: postfixadmin_dependencies is defined and postfixadmin_dependencies
#    tags: [ 'mysql', 'roundcube' ]

#  - role: debops.nginx
#    nginx_servers: [ '{{ roundcube_nginx_server }}' ]
#    nginx_upstreams: [ '{{ roundcube_nginx_upstream_php5 }}' ]
#    when: postfixadmin_dependencies is defined and postfixadmin_dependencies
#    tags: [ 'mysql', 'roundcube', 'nginx' ]
#
#galaxy_info:
#  author: 'Maciej Delmanowski'
#  description: 'Install and configure PHPMyAdmin on a MySQL database server'
#  company: 'DebOps'
#  license: 'GNU General Public License v3'
#  min_ansible_version: '1.7.0'
#  platforms:
#  - name: Ubuntu
#    versions:
#    - precise
#    - quantal
#    - raring
#    - saucy
#    - trusty
#  - name: Debian
#    versions:
#    - wheezy
#    - jessie
#  categories:
#  - 'database:sql'
#  - 'system'
#
#ansigenome_info:
#  github_url: "https://github.com/debops/ansible-phpmyadmin"
#  git_branch: "master"
#  galaxy_id: "1587"
#
#  travis: True
#
#  license_url: 'https://tldrlegal.com/license/gnu-general-public-license-v3-(gpl-3)'
#
#  authors:
#    - name:  'Maciej Delmanowski'
#      url: ''
#      email: 'drybjed@gmail.com'
#      twitter: 'drybjed'
#      github: 'drybjed'
#
#  synopsis: |
#    This role installs [PHPMyAdmin](http://www.phpmyadmin.net/) interface for
#    MySQL database. At the moment it is designed to manage only a database on
#    `localhost`, and is usually enabled by `debops.mysql` role itself in
#    a specifically written play. In the future it will be redesigned as
#    a standalone installation when secure access to remote databases is
#    available.
#
